profiles {


// aws dev environment at Seqera
// assumes AWS credentials already in shell env
seqera {
  workDir = 's3://marco-dev-testing/ziosergio/test-dir'
  process.container = 'ubuntu:22.04'
}

// nextflow prior to v22.12.0-edge requires AWS_PROFILE env var for alt profiles
standard {
  aws {
    client {
      s3PathStyleAccess = true
      endpoint = "https://acacia.pawsey.org.au"
    }
  }
  // only needed for fusion
  workDir = 's3://pawsey0001-marco-mytesting'
  process.container = 'ubuntu:22.04'
}

// aws.profile requires nf v22.12.0-edge or later
altprofile {
  aws {
    profile = "acacia-pawsey0001"
    client {
      s3PathStyleAccess = true
      endpoint = "https://acacia.pawsey.org.au"
    }
  }
  // only needed for fusion
  workDir = 's3://pawsey0001-marco-mytesting'
  process.container = 'ubuntu:22.04'
}

fusion {
  // requires nf v22.10.0 or later
  // in theory needs to set policy
  // in Acacia, not needed for own buckets, e.g.
  // mc policy set-json $(pwd)/acacia-fusion.json acacia-mine/pawsey0001-marco-mytesting
  fusion {
    enabled = true
  }
  wave {
      enabled = true
  }
  docker {
    enabled = true
    envWhitelist = 'AWS_ACCESS_KEY_ID,AWS_SECRET_ACCESS_KEY'
  }
}

secrets {
  aws {
    client {
      s3PathStyleAccess = true
      endpoint = "https://acacia.pawsey.org.au"
    }
    accessKey = secrets.aws_mine_key
    secretKey = secrets.aws_mine_secret
  }
}

secrets_altprofile {
  aws {
    client {
      s3PathStyleAccess = true
      endpoint = "https://acacia.pawsey.org.au"
    }
    accessKey = secrets.aws_pawsey0001_key
    secretKey = secrets.aws_pawsey0001_secret
  }
}


}